# Background description:
<Background>:
	source: self.source
	allow_stretch: True
	keep_ratio: False
	size: app.window.size

# Sets the styling for the labels that contains lives, points and  level
<TableLabel>:
	canvas.before:
	    Color:
	    	rgb: 1,1,1
		Rectangle:
			size: self.size
			pos:self.x - 10, self.y
			source: 'graphics/column.png'
	color: 0,0,0,1
	font_size: 18
	bold: True
	text_size: self.size
	valign:'middle'

# Shooter description:
<Shooter>:
	shooter_tower_scatter: shooter_tower_scatter
	size: 100, 100   

	Image:
		id: 'tank_image'
		source: 'graphics/db.png'
		size: 100, 100
		pos: root.pos

	Scatter:
		id: shooter_tower_scatter
		size_hint: None, None
		size: 30, 210
		pos:root.x + 35, root.y 
		#center: root.center
		do_rotation: False
		do_scale: False
		do_translation: False
		
		Image:
			source: 'graphics/tank_tower.png'
			size: 30, 210 
			pos: self.pos
			rotate:90

	Image:
		id: 'tank_top'
		source: 'graphics/tank_top.png'
		size: 60, 30
		pos: root.x + 20, root.y + 85

# Bubble description:
<Bubble>:
	size:44,44
	#size: 35 / (1200.0 / app.window.height), 35 / (1200.0 / app.window.height)
	size_hint: None, None

# Threat description:
<Threat>:
	id: threatId
	size_hint: None, None
	keep_data: True
    size:138,138
	
	p1: self.pos
    p2: self.right, self.y
    p3: self.center_x, self.top * 0.98

    # draw something
    canvas:
        Color:
            rgba: 1, 0, 0, 0
        Triangle:
            points: self.p1 + self.p2 + self.p3
    Image:
    	source:threatId.imageSrc
    	size:threatId.size
    	pos:threatId.pos

	

# Main widget description:
<DbShooterWidget>:
	id: DbShooterWidget
	shooter: shooter

	Image:
	    source: 'graphics/background.jpg'
        allow_stretch: True
        keep_ratio: False
        size: app.window.size

	
	# Widget where all the obsticles (balls, threats) will be:
	FloatLayout:
		id: bubbleLayout
		canvas:
			Color:
	            rgba: 1, 1, 1, 0.25
	        Rectangle:
	            pos: self.pos
	            size: self.size

		pos_hint:None, None
		pos:(root.width-self.width)/2, root.y + 500
	    #pos:(root.width-self.width)/2, (root.height-self.height)/2
	    size_hint:None, None
	    height: root.height
	    width: root.height * 0.669
	#
	#this defines the base on which the shooter stands (with level, table/database image etc) 
	BoxLayout:
		id: databaseWidget
		height: root.height *0.2
		width: bubbleLayout.width *0.8
		bottom: root.height
		size_hint: None, None
		pos: bubbleLayout.pos
		canvas:
			Rectangle:
	            size: self.width, self.height
	            pos: root.width *0.5 - self.width *0.5, 0
	            source: 'graphics/table.png'

	#This is the wrapper for level, and points etc
	BoxLayout:
		height:root.height *0.16
		width:bubbleLayout.width *0.7
		bottom: root.height 
		size_hint:None, None
		pos: root.width *0.5 - self.width *0.5, 0
		#canvas:
		#	Color:
		#		rgb:0,0,1
		#	Rectangle:
	    #        size: self.width, self.height
	    #        pos: root.width *0.5 - self.width *0.5, 0
	    FloatLayout:
	    	id: nextBubbleLayout
	    		
	    #this defines the level, points and lives
	    GridLayout:
	    	cols:2
	    	padding:20
	    	spacing:10,10
	    	#lives
	    	TableLabel:
	    		text: 'Lives'
	    		
	    	TableLabel:
				id: livesLbl
		        text: str(DbShooterWidget.lives)
		    #points
		    TableLabel:
	    		text: 'Points'
		    TableLabel:
		        text: str(root.points)

		    #level
		    TableLabel:
	    		text: 'Level'
		    TableLabel:
		        text: str(root.level)
		       		         
	Shooter:
		id: shooter
		tank_image_source: 'graphics/tank.png'
		pos: root.width *0.5 - 50 , databaseWidget.height - (databaseWidget.height * 0.15)


<Button>:
	font_size:43


